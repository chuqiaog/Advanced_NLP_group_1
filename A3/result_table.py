import pandas as pd
from IPython.display import display_html

baseline_results = {'ADJ': {'precision': 0.7312252964426877,
  'recall': 0.7142857142857143,
  'f1': 0.72265625,
  'number': 259},
 'ADV': {'precision': 0.6910569105691057,
  'recall': 0.6378986866791745,
  'f1': 0.6634146341463414,
  'number': 533},
 'ARG0': {'precision': 0.9242424242424242,
  'recall': 0.8714285714285714,
  'f1': 0.8970588235294117,
  'number': 70},
 'ARG1': {'precision': 0.6554621848739496,
  'recall': 0.75,
  'f1': 0.6995515695067266,
  'number': 104},
 'ARG1-DSP': {'precision': 0.0, 'recall': 0.0, 'f1': 0.0, 'number': 1},
 'ARG2': {'precision': 0.2,
  'recall': 0.25,
  'f1': 0.22222222222222224,
  'number': 8},
 'ARG3': {'precision': 0.0, 'recall': 0.0, 'f1': 0.0, 'number': 2},
 'ARGM-ADJ': {'precision': 0.0, 'recall': 0.0, 'f1': 0.0, 'number': 1},
 'ARGM-ADV': {'precision': 0.0, 'recall': 0.0, 'f1': 0.0, 'number': 1},
 'ARGM-CXN': {'precision': 0.3333333333333333,
  'recall': 0.4,
  'f1': 0.3636363636363636,
  'number': 5},
 'ARGM-DIR': {'precision': 0.0, 'recall': 0.0, 'f1': 0.0, 'number': 1},
 'ARGM-LOC': {'precision': 0.6666666666666666,
  'recall': 0.8,
  'f1': 0.7272727272727272,
  'number': 10},
 'ARGM-MNR': {'precision': 0.0, 'recall': 0.0, 'f1': 0.0, 'number': 8},
 'ARGM-TMP': {'precision': 0.0, 'recall': 0.0, 'f1': 0.0, 'number': 2},
 'CAU': {'precision': 0.5666666666666667,
  'recall': 0.6666666666666666,
  'f1': 0.6126126126126126,
  'number': 51},
 'COM': {'precision': 0.3333333333333333,
  'recall': 0.38461538461538464,
  'f1': 0.3571428571428571,
  'number': 13},
 'CXN': {'precision': 0.6428571428571429,
  'recall': 0.75,
  'f1': 0.6923076923076924,
  'number': 12},
 'DIR': {'precision': 0.47619047619047616,
  'recall': 0.425531914893617,
  'f1': 0.449438202247191,
  'number': 47},
 'DIS': {'precision': 0.7873015873015873,
  'recall': 0.8294314381270903,
  'f1': 0.8078175895765471,
  'number': 299},
 'DSP': {'precision': 0.0, 'recall': 0.0, 'f1': 0.0, 'number': 2},
 'EXT': {'precision': 0.780952380952381,
  'recall': 0.7454545454545455,
  'f1': 0.7627906976744186,
  'number': 110},
 'GOL': {'precision': 0.5,
  'recall': 0.20833333333333334,
  'f1': 0.29411764705882354,
  'number': 24},
 'LOC': {'precision': 0.5756302521008403,
  'recall': 0.6555023923444976,
  'f1': 0.6129753914988815,
  'number': 209},
 'LVB': {'precision': 0.725,
  'recall': 0.8169014084507042,
  'f1': 0.7682119205298014,
  'number': 71},
 'MNR': {'precision': 0.5855263157894737,
  'recall': 0.5705128205128205,
  'f1': 0.577922077922078,
  'number': 156},
 'MOD': {'precision': 0.9326530612244898,
  'recall': 0.970276008492569,
  'f1': 0.9510926118626432,
  'number': 471},
 'NEG': {'precision': 0.9177489177489178,
  'recall': 0.9592760180995475,
  'f1': 0.9380530973451326,
  'number': 221},
 'PRD': {'precision': 0.45161290322580644,
  'recall': 0.3181818181818182,
  'f1': 0.3733333333333333,
  'number': 44},
 'PRP': {'precision': 0.5581395348837209,
  'recall': 0.631578947368421,
  'f1': 0.5925925925925927,
  'number': 76},
 'PRR': {'precision': 0.7878787878787878,
  'recall': 0.7536231884057971,
  'f1': 0.7703703703703704,
  'number': 69},
 'RG0': {'precision': 0.8710100568430258,
  'recall': 0.907103825136612,
  'f1': 0.8886906089672094,
  'number': 2196},
 'RG1': {'precision': 0.8440088348978465,
  'recall': 0.885060799073538,
  'f1': 0.8640474844544941,
  'number': 3454},
 'RG2': {'precision': 0.7552565180824222,
  'recall': 0.7835951134380453,
  'f1': 0.7691648822269808,
  'number': 1146},
 'RG3': {'precision': 0.7142857142857143,
  'recall': 0.33783783783783783,
  'f1': 0.4587155963302752,
  'number': 74},
 'RG4': {'precision': 0.640625,
  'recall': 0.7321428571428571,
  'f1': 0.6833333333333332,
  'number': 56},
 'RG5': {'precision': 0.0, 'recall': 0.0, 'f1': 0.0, 'number': 1},
 'RGA': {'precision': 0.0, 'recall': 0.0, 'f1': 0.0, 'number': 2},
 'TMP': {'precision': 0.7986577181208053,
  'recall': 0.8576576576576577,
  'f1': 0.8271068635968724,
  'number': 555},
 'V': {'precision': 0.7647058823529411,
  'recall': 0.8125,
  'f1': 0.787878787878788,
  'number': 16},
 '_': {'precision': 0.7772353851649005,
  'recall': 0.798629801810619,
  'f1': 0.7877873649912508,
  'number': 8174},
 'overall_precision': 0.7944717830593655,
 'overall_recall': 0.8179368330279185,
 'overall_f1': 0.8060335670278309,
 'overall_accuracy': 0.974109952388013}

advanced_results ={'ADJ': {'precision': 0.7361111111111112,
  'recall': 0.7130044843049327,
  'f1': 0.7243735763097949,
  'number': 223},
 'ADV': {'precision': 0.7036247334754797,
  'recall': 0.6707317073170732,
  'f1': 0.6867845993756504,
  'number': 492},
 'ARG0': {'precision': 0.9393939393939394,
  'recall': 0.8857142857142857,
  'f1': 0.9117647058823529,
  'number': 70},
 'ARG1': {'precision': 0.7788461538461539,
  'recall': 0.7788461538461539,
  'f1': 0.7788461538461539,
  'number': 104},
 'ARG1-DSP': {'precision': 0.0, 'recall': 0.0, 'f1': 0.0, 'number': 1},
 'ARG2': {'precision': 0.23529411764705882,
  'recall': 0.5,
  'f1': 0.31999999999999995,
  'number': 8},
 'ARG3': {'precision': 0.0, 'recall': 0.0, 'f1': 0.0, 'number': 2},
 'ARGM-ADJ': {'precision': 0.0, 'recall': 0.0, 'f1': 0.0, 'number': 1},
 'ARGM-ADV': {'precision': 0.0, 'recall': 0.0, 'f1': 0.0, 'number': 1},
 'ARGM-CXN': {'precision': 0.5714285714285714,
  'recall': 0.8,
  'f1': 0.6666666666666666,
  'number': 5},
 'ARGM-DIR': {'precision': 0.0, 'recall': 0.0, 'f1': 0.0, 'number': 1},
 'ARGM-LOC': {'precision': 1.0,
  'recall': 0.7,
  'f1': 0.8235294117647058,
  'number': 10},
 'ARGM-MNR': {'precision': 0.0, 'recall': 0.0, 'f1': 0.0, 'number': 8},
 'ARGM-TMP': {'precision': 0.6666666666666666,
  'recall': 1.0,
  'f1': 0.8,
  'number': 2},
 'CAU': {'precision': 0.5666666666666667,
  'recall': 0.7391304347826086,
  'f1': 0.6415094339622641,
  'number': 46},
 'COM': {'precision': 0.38095238095238093,
  'recall': 0.6153846153846154,
  'f1': 0.47058823529411764,
  'number': 13},
 'CXN': {'precision': 0.5789473684210527,
  'recall': 0.9166666666666666,
  'f1': 0.7096774193548387,
  'number': 12},
 'DIR': {'precision': 0.45098039215686275,
  'recall': 0.48936170212765956,
  'f1': 0.46938775510204084,
  'number': 47},
 'DIS': {'precision': 0.7771739130434783,
  'recall': 0.7857142857142857,
  'f1': 0.7814207650273224,
  'number': 182},
 'DSP': {'precision': 0.0, 'recall': 0.0, 'f1': 0.0, 'number': 1},
 'EXT': {'precision': 0.7757009345794392,
  'recall': 0.7980769230769231,
  'f1': 0.7867298578199052,
  'number': 104},
 'GOL': {'precision': 0.46153846153846156,
  'recall': 0.25,
  'f1': 0.32432432432432434,
  'number': 24},
 'LOC': {'precision': 0.6591928251121076,
  'recall': 0.7101449275362319,
  'f1': 0.6837209302325582,
  'number': 207},
 'LVB': {'precision': 0.7948717948717948,
  'recall': 0.8985507246376812,
  'f1': 0.8435374149659864,
  'number': 69},
 'MNR': {'precision': 0.5694444444444444,
  'recall': 0.5578231292517006,
  'f1': 0.563573883161512,
  'number': 147},
 'MOD': {'precision': 0.9819004524886877,
  'recall': 0.9819004524886877,
  'f1': 0.9819004524886877,
  'number': 442},
 'NEG': {'precision': 0.9812206572769953,
  'recall': 0.9675925925925926,
  'f1': 0.9743589743589743,
  'number': 216},
 'PRD': {'precision': 0.36585365853658536,
  'recall': 0.3409090909090909,
  'f1': 0.3529411764705882,
  'number': 44},
 'PRP': {'precision': 0.5974025974025974,
  'recall': 0.6133333333333333,
  'f1': 0.6052631578947367,
  'number': 75},
 'PRR': {'precision': 0.7761194029850746,
  'recall': 0.7536231884057971,
  'f1': 0.7647058823529411,
  'number': 69},
 'RG0': {'precision': 0.8875772906127037,
  'recall': 0.9164248403946604,
  'f1': 0.9017704169046259,
  'number': 1723},
 'RG1': {'precision': 0.8864257515942909,
  'recall': 0.9127579737335835,
  'f1': 0.8993991680788784,
  'number': 3198},
 'RG2': {'precision': 0.8537693006357856,
  'recall': 0.8355555555555556,
  'f1': 0.844564240790656,
  'number': 1125},
 'RG3': {'precision': 0.6607142857142857,
  'recall': 0.5,
  'f1': 0.5692307692307693,
  'number': 74},
 'RG4': {'precision': 0.6557377049180327,
  'recall': 0.7142857142857143,
  'f1': 0.6837606837606838,
  'number': 56},
 'RG5': {'precision': 0.0, 'recall': 0.0, 'f1': 0.0, 'number': 1},
 'RGA': {'precision': 0.0, 'recall': 0.0, 'f1': 0.0, 'number': 2},
 'TMP': {'precision': 0.8647166361974405,
  'recall': 0.8743068391866913,
  'f1': 0.8694852941176471,
  'number': 541},
 'V': {'precision': 0.7222222222222222,
  'recall': 0.8125,
  'f1': 0.7647058823529411,
  'number': 16},
 '_': {'precision': 0.8340905961723806,
  'recall': 0.8432628062360802,
  'f1': 0.8386516231743615,
  'number': 7184},
 'overall_precision': 0.8394317435683161,
 'overall_recall': 0.8499335186752085,
 'overall_f1': 0.8446499894891737,
 'overall_accuracy': 0.9827437115942361}

baseline_df = pd.DataFrame(baseline_results).T
advanced_df = pd.DataFrame(advanced_results).T

# Add model labels
baseline_df['Model'] = 'Baseline'
advanced_df['Model'] = 'Advanced'

# Combine DataFrames
combined_df = pd.concat([baseline_df, advanced_df])
 
def display_side_by_side(*dfs):
    """
    Display general tables side by side
    """
    html_str = ''
    for df in dfs:
        html_str += df.to_html()
    display_html(html_str.replace('table', 'table style="display:inline;margin-right:10px;"'), raw=True)

def filtered_table(baseline_df, advanced_df):
    """
    Display tables side by side where the baseline model has better performances
    """
    # Create masks for rows where baseline has lower scores
    precision = baseline_df['precision'] > advanced_df['precision']
    recall = baseline_df['recall'] > advanced_df['recall']
    f1 = baseline_df['f1'] > advanced_df['f1']
    
    # Apply masks to get filtered rows from each DataFrame
    fil_baseline_df = baseline_df[precision | recall | f1]
    fil_advanced_df = advanced_df[precision | recall | f1]
    return fil_baseline_df, fil_advanced_df
